<!DOCTYPE html>
<html>
<head>
	<!--Import Google Icon Font-->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!--Import materialize.css-->
	<link type="text/css" rel="stylesheet" href="assets/css/materialize.min.css" media="screen,projection" />

	<!-- <link rel="stylesheet" href="assets/css/stylesheet.css" /> -->
	<title>Greetings Scripps</title>

	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- <link rel="stylesheet" href="/assets/css/stylesheet.css" /> -->
</head>
<body>
	<nav class="light-blue lighten-1" role="navigation">
		<div class="nav-wrapper container">
			<img src="assets/images/profile_picture.png" alt="Profile Picture" style="height:42px;margin-top:10px;"/>
			<a id="logo-container" href="/" class="brand-logo" style="margin-left:12px;top:-3px">
				<small>Jerry</small>
			</a>

			<ul id="nav-mobile" class="sidenav">
				<li><a href="#">Navbar Link</a></li>
			</ul>
			<a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
		</div>
	</nav>
	<div class="container">
		<header>
			<h3 class="indigo-text center">PROJECTS</h3>
			<div class="center">
			<a href="cards/new" class="btn btn-default" role="button">
				New Project
			</a>
			<a href="upload" class="btn btn-default" role="button">
				New Skill
			</a></div>
			<br/>
		</header>
		<div class="row">
			{{#each cards}}
			<div class="col s12 m4" style="height:320px">
				<div class="card">
					<div class="card-image">
						<img src="/assets/images/cards/{{card_image}}">
						<span class="card-title">{{level}}</span>
					</div>
					<div class="card-content">
						<p>{{name}}</p>
					</div>
					<div class="card-action">
						<a href="cards/{{id}}" class="delete-button">Delete</a>
						<a href="cards/{{id}}">Preview</a>
					</div>
				</div>
			</div>
			{{/each}}
		</div>
	</div>
	<script>
		var deleteButtons = document.getElementsByClassName('delete-button'),
			deleteClickHandler = function(e) {
				e.preventDefault();
				e.stopPropagation();
				var request = new XMLHttpRequest();
				request.open('DELETE', e.target.href, true);
				request.onload = function() {
					if (request.status >= 200 && request.status < 400) {
						location.reload();
					} else {
					}
				};
				request.send();
			},
			counter = 0;
		while(counter < deleteButtons.length) {
			deleteButtons.item(counter).addEventListener('click', deleteClickHandler);
			counter++;
		}
	</script>
</body>
</html>
